!function(a){a.jscontent_htmlTree=function(b,c){function d(b){var c=b;return"object"!=typeof b&&(c=a(b)),o=a("<div></div>").append(b.clone()).find("[data-model-id][data-element_type],[data-model-id][data-aria-control]"),e(o,p),j(g(o,p),o,p,q),q.html()}function e(b,c){b.length&&b.each(function(d){c[d]=0==d?n:b.index(a(b[d]).parents("[data-model-id][data-element_type],[data-model-id][data-aria-control]").first())})}function f(a){return 0==a.length}function g(a,b){return f(a,b)?n:0}function h(a,b,c){var d,e;if(0>a)return n;for(d=a+1,e=0;d<=b.length-1&&!e;)c[d]==a?e=1:d+=1;return e?d:n}function i(a,b,c){var d,e,f;if(0>a)return n;for(e=c[a],d=a+1,f=0;d<=b.length-1&&!f;)c[d]==e?f=1:d+=1;return f?d:n}function j(a,b,c,d,e){var f;for(k(a,b,c,d,e),f=h(a,b,c);f!=n;)j(f,b,c,d,e),f=i(f,b,c)}function k(b,c,d,e){if(c[b]){var f,g,h=0,i=a(c[b]),j=guid();if(i.attr("data-element-item-count")&&(h=parseInt(i.attr("data-element-item-count"))),e.find("[data-model-id][data-element_type],[data-model-id][data-aria-control]").length&&(g=e.find("[data-model-id][data-element_type],[data-model-id][data-aria-control]")),i.attr("data-element_id")){if(f=a("#tmpl-jscontent-new-element-"+i.attr("data-element_id")).clone()){f=f.html();var k=a.jvcBuilder.mapper[i.attr("data-model-id")];f=m.jvcBuilder.setValueExtrafield(f,k.params),f=a(f),"tz_row"===i.attr("data-element_type")&&i.hasClass("tz_row-inner")&&f.addClass("tz_row-inner"),"tz_column"===i.attr("data-element_type")&&i.find("[data-model-id][data-element_type]").length&&f.removeClass("tz_empty-column"),m.jvcBuilder.createDataModelIds(f),-1==d[b]?(a.jvcBuilder.insert_mapper_item(f,"",m.parent_element_object,k),e.append(f[0])):g&&g.eq(d[b]).find("> .element_wrapper").find(".tz_column_container,.tz_row_container").first().length&&(a.jvcBuilder.insert_mapper_item(f,"",g.eq(d[b]),k),e.find("[data-model-id][data-aria-control],[data-model-id][data-element_type]").eq(d[b]).find("> .element_wrapper").find(".tz_column_container,.tz_row_container").first().removeClass("tz_empty-column").removeClass("tz_empty-container fancybox").children(":not([data-model-id])").remove().end().append(f[0]))}}else if(h){var l=a.jvcBuilder.mapper[i.attr("data-model-id")],n=m.jvcBuilder.createId(i.parent().find(">[data-model-id]").length);h.each(function(c){var k;k=-1!=d[b]?g.eq(d[b]):m.parent_element_object,f=a("#template-jscontent-new-element-"+k.attr("data-element_id")+"-item-"+c).clone(),f=f.html(),f&&(f=m.jvcBuilder.setValueExtrafield(f,l.params),-1!=d[b]&&(f=c!=h-1?f.replace(/\[modelid\]\[\/modelid\]/gi,j+"-"+c):f.replace(/\[modelid\]\[\/modelid\]/gi,j),f=m.jvcBuilder.setIDHtml(f,i.parent().find(">[data-model-id]").length,n,!1,!1,c)),f=a(f),m.jvcBuilder.createDataModelIds(f),c!=h-1?-1!=d[b]&&("[modelid][/modelid]"==g.eq(d[b]).find("[data-model-id][data-aria-control]").first().attr("data-aria-control")?(g.eq(d[b]).find("[aria-control="+g.eq(d[b]).find("[data-model-id][data-aria-control]").first().attr("data-aria-control").replace(/(\[|\/|\])/g,"\\$1")+"]").parent().append(f[0]),g.eq(d[b]).find("[aria-control=\\[modelid\\]\\[\\/modelid\\]]").first().remove()):g.eq(d[b]).find("[aria-control="+g.eq(d[b]).find("[data-model-id][data-aria-control]").first().attr("data-aria-control").replace(/(\[|\/|\])/g,"\\$1")+"-"+c+"]").parent().append(f[0])):-1!=d[b]?(g.eq(d[b]).find("[data-model-id][data-aria-control]").first().parents("[data-model-id]").first().parent().append(f[0]),a.jvcBuilder.insert_mapper_item(f.find("[data-model-id][data-aria-control]").first(),"",g.eq(d[b]),l),"[modelid][/modelid]"==g.eq(d[b]).find("[data-model-id][data-aria-control]").first().attr("data-aria-control")&&g.eq(d[b]).find("[data-model-id][data-aria-control=\\[modelid\\]\\[\\/modelid\\]]").first().parents("[data-model-id]").first().remove()):e.append(f[0]))})}}}var l=a(b),m=a.extend({},a.jscontent_htmlTree.defaults,c);const n=-1;var o,p={},q=a("<div></div>").clone();return d(l)},a.jscontent_htmlTree.defaults={element_id:"",parent_element_object:"",jvcBuilder:{}},a.fn.jscontent_htmlTree=function(b){return void 0===b&&(b={}),"object"==typeof b?a.jscontent_htmlTree(this,b):void 0}}(jQuery);